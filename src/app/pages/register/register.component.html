<main class="register-page p-5">
  <div class="container register-container m-auto p-4 border-round-lg shadow-2">
    <form [formGroup]="formGroup" (ngSubmit)="registerSubmit()">
      <h2 class="text-center color-primary mb-4">Create New Account:</h2>

      <div class="p-fluid flex flex-column gap-3">

        <!-- Username -->
        <div>
          <p-inputGroup>
            <p-inputGroupAddon>
              <i class="pi pi-user"></i>
            </p-inputGroupAddon>
            <input pInputText id="name" placeholder="Username" formControlName="name" />
          </p-inputGroup>
          <div *ngIf="formGroup.get('name')?.invalid && formGroup.get('name')?.touched" class="validation-msg mt-1">
            <ng-container *ngIf="formGroup.get('name')?.errors?.['required']">
              <p-messages
                class="small-error"
                [value]="[{severity:'error', detail:'Username is required.'}]"
                [enableService]="false"
                [closable]="false">
              </p-messages>
            </ng-container>
            <ng-container *ngIf="formGroup.get('name')?.errors?.['minlength']">
              <p-messages
                class="small-error"
                [value]="[{severity:'error', detail:'Username must be at least 3 characters long.'}]"
                [enableService]="false"
                [closable]="false">
              </p-messages>
            </ng-container>
          </div>
        </div>

        <!-- Email -->
        <div>
          <p-inputGroup>
            <p-inputGroupAddon>
              <i class="pi pi-envelope"></i>
            </p-inputGroupAddon>
            <input pInputText id="email" placeholder="Email" formControlName="email" />
          </p-inputGroup>
          <div *ngIf="formGroup.get('email')?.invalid && formGroup.get('email')?.touched" class="validation-msg mt-1">
            <ng-container *ngIf="formGroup.get('email')?.errors?.['required']">
              <p-messages
                class="small-error"
                [value]="[{severity:'error', detail:'Email is required.'}]"
                [enableService]="false"
                [closable]="false">
              </p-messages>
            </ng-container>
            <ng-container *ngIf="formGroup.get('email')?.errors?.['email']">
              <p-messages
                class="small-error"
                [value]="[{severity:'error', detail:'Please enter a valid email address.'}]"
                [enableService]="false"
                [closable]="false">
              </p-messages>
            </ng-container>
          </div>
        </div>

        <!-- Password -->
        <div>
          <p-inputGroup>
            <p-inputGroupAddon>
              <i class="pi pi-lock"></i>
            </p-inputGroupAddon>
            <p-password placeholder="Password" formControlName="password" [feedback]="false" [toggleMask]="true"></p-password>
          </p-inputGroup>
          <div *ngIf="formGroup.get('password')?.invalid && formGroup.get('password')?.touched" class="validation-msg mt-1">
            <ng-container *ngIf="formGroup.get('password')?.errors?.['required']">
              <p-messages class="small-error"
                [value]="[{severity:'error', detail:'Password is required.'}]"
                [enableService]="false"
                [closable]="false"></p-messages>
            </ng-container>
            <ng-container *ngIf="formGroup.get('password')?.errors?.['minlength']">
              <p-messages class="small-error"
                [value]="[{severity:'error', detail:'Password must be at least 6 characters long.'}]"
                [enableService]="false"
                [closable]="false"></p-messages>
            </ng-container>
          </div>
        </div>

        <!-- Confirm Password -->
        <div>
          <p-inputGroup>
            <p-inputGroupAddon>
              <i class="pi pi-lock"></i>
            </p-inputGroupAddon>
            <p-password placeholder="Confirm Password" formControlName="rePassword" [feedback]="false" [toggleMask]="true"></p-password>
          </p-inputGroup>
          <div *ngIf="formGroup.errors?.['passwordMismatch'] && formGroup.get('rePassword')?.touched" class="validation-msg mt-1">
            <p-messages
              class="small-error"
              [value]="[{severity:'error', detail:'Passwords do not match.'}]"
              [enableService]="false"
              [closable]="false">
            </p-messages>
          </div>
        </div>

        <!-- Phone -->
        <div>
          <p-inputGroup>
            <p-inputGroupAddon>
              <i class="pi pi-phone"></i>
            </p-inputGroupAddon>
            <input pInputText id="phone" placeholder="Phone number" formControlName="phone" />
          </p-inputGroup>
          <div *ngIf="formGroup.get('phone')?.invalid && formGroup.get('phone')?.touched" class="validation-msg mt-1">
            <ng-container *ngIf="formGroup.get('phone')?.errors?.['required']">
              <p-messages class="small-error"
                [value]="[{severity:'error', detail:'Phone number is required.'}]"
                [enableService]="false"
                [closable]="false"></p-messages>
            </ng-container>
            <ng-container *ngIf="formGroup.get('phone')?.errors?.['pattern']">
              <p-messages class="small-error"
                [value]="[{severity:'error', detail:'Please enter a valid 11-digit phone number.'}]"
                [enableService]="false"
                [closable]="false"></p-messages>
            </ng-container>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="flex justify-content-center mt-3">
          <p-button label="Register" severity="primary" type="submit" [disabled]="!isFormValid"></p-button>
        </div>

      </div>
    </form>
     <p-toast />
  </div>
</main>
<ngx-spinner bdColor = "rgba(74,3,95,0.09)" size = "medium" color = "#af46ec" type = "ball-spin-fade" [fullScreen] = "true"></ngx-spinner>